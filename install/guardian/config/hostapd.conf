# HookProbe Guardian - hostapd Configuration
# Dynamic VLAN assignment with RADIUS/MAC authentication
# Version: 5.0.0

# Interface configuration
interface=wlan0
driver=nl80211
bridge=br0

# SSID Configuration
ssid=HookProbe-Guardian
hw_mode=g
channel=6
country_code=US

# 802.11n/ac support
ieee80211n=1
ieee80211ac=1
wmm_enabled=1

# Security - WPA2/WPA3
wpa=2
wpa_key_mgmt=WPA-PSK WPA-EAP
wpa_pairwise=CCMP
rsn_pairwise=CCMP

# PSK for devices that don't support 802.1X
# This is overridden by RADIUS for registered devices
wpa_passphrase=CHANGEME_HOTSPOT_PASSWORD

# ============================================
# RADIUS Configuration for MAC Authentication
# ============================================
ieee8021x=1
auth_algs=1

# RADIUS server (Fortress/Nexus)
auth_server_addr=127.0.0.1
auth_server_port=1812
auth_server_shared_secret=hookprobe_radius

# Accounting
acct_server_addr=127.0.0.1
acct_server_port=1813
acct_server_shared_secret=hookprobe_radius

# ============================================
# Dynamic VLAN Assignment
# ============================================
dynamic_vlan=1

# VLAN tagged interface naming
# Creates: wlan0.10, wlan0.20, etc.
vlan_tagged_interface=eth0
vlan_bridge=br

# VLAN file mapping (auto-created by Guardian service)
vlan_file=/etc/hostapd/hostapd.vlan

# ============================================
# MAC Authentication Bypass (MAB)
# ============================================
# For IoT devices that don't support 802.1X
macaddr_acl=2
# 0 = accept unless in deny list
# 1 = deny unless in accept list
# 2 = use external RADIUS server

# Accept/deny files (fallback if RADIUS unavailable)
accept_mac_file=/etc/hostapd/hostapd.accept
deny_mac_file=/etc/hostapd/hostapd.deny

# ============================================
# Client Isolation (per VLAN)
# ============================================
ap_isolate=1

# ============================================
# Logging
# ============================================
logger_syslog=-1
logger_syslog_level=2
logger_stdout=-1
logger_stdout_level=2

# ============================================
# Performance Tuning
# ============================================
# Max clients per radio
max_num_sta=128

# Beacon interval
beacon_int=100

# DTIM period
dtim_period=2

# RTS threshold
rts_threshold=2347

# Fragmentation threshold
fragm_threshold=2346
