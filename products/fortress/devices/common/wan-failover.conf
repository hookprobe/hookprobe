# HookProbe Fortress - WAN Failover Configuration
# /etc/hookprobe/wan-failover.conf
#
# This file configures the IP SLA-style WAN health monitoring.
# The monitor checks primary WAN connectivity and fails over to backup
# when the primary becomes unreachable (even if link is still up).

# ============================================================
# INTERFACES (leave empty for auto-detection)
# ============================================================

# Primary WAN interface (auto-detected from default route if empty)
# Examples: eth0, enp1s0, eno1
PRIMARY_IFACE=""

# Backup WAN interface (auto-detected from WWAN/second ethernet if empty)
# Examples: wwan0, wwp0s20f0u4, eth1
BACKUP_IFACE=""

# ============================================================
# ROUTE METRICS
# ============================================================

# Route metric for primary (lower = preferred)
PRIMARY_METRIC=100

# Route metric for backup (higher = fallback)
BACKUP_METRIC=200

# ============================================================
# HEALTH CHECK TARGETS
# ============================================================

# Space-separated list of IPs to ping for health checks
# Using multiple targets increases reliability
# The check passes if ANY target responds
HEALTH_TARGETS="8.8.8.8 1.1.1.1 9.9.9.9"

# Ping timeout in seconds
PING_TIMEOUT=2

# Number of pings per target
PING_COUNT=1

# ============================================================
# TIMING
# ============================================================

# Interval between health checks (seconds)
# Lower = faster failover but more traffic
CHECK_INTERVAL=5

# ============================================================
# FAILOVER THRESHOLDS (Hysteresis)
# ============================================================

# Number of consecutive failures before failover
# Higher = more stable but slower to react
FAIL_THRESHOLD=3

# Number of consecutive successes before failback
# Higher = ensures primary is truly stable before switching back
RECOVER_THRESHOLD=5

# ============================================================
# ADVANCED
# ============================================================

# Enable debug logging (true/false)
# DEBUG=false

# Custom log file (default: /var/log/hookprobe/wan-failover.log)
# LOG_FILE="/var/log/hookprobe/wan-failover.log"

# State file for persistence across restarts
# STATE_FILE="/var/lib/fortress/wan-failover-state.json"
