# ============================================================
# Raspberry Pi Compute Module 5 Device Profile for HookProbe Fortress
# ============================================================
#
# Target Hardware:
#   - Raspberry Pi Compute Module 5 (CM5)
#   - CM5 with various carrier boards (IO Board, custom carriers)
#   - Also covers: Raspberry Pi 5 with USB Ethernet adapters
#
# Carrier Board Considerations:
#   - Official IO Board: 1x GbE, 2x USB3, 1x PCIe
#   - Third-party carriers may have: 2-4x GbE, M.2, mPCIe
#   - Interface names depend on carrier board design
#
# Typical Configurations:
#   - BCM2712 SoC (Quad-core Cortex-A76 @ 2.4GHz)
#   - 2/4/8/16GB LPDDR4X RAM
#   - PCIe 2.0 x1 for expansion (NVMe, Ethernet, LTE)
#   - Optional onboard WiFi 5/BT 5.0
#
# ============================================================

# Device Identification
DEVICE_ID="rpi-cm5"
DEVICE_FAMILY="raspberry-pi-bcm2712"
DEVICE_CLASS="compute-module"
ARCHITECTURE="arm64"

# Hardware Capabilities
MIN_RAM_GB=2
RECOMMENDED_RAM_GB=16
MAX_LAN_PORTS=4  # Depends on carrier board
SUPPORTS_2_5GBE=false  # Only via PCIe adapter
SUPPORTS_WAKE_ON_LAN=false  # Not typically supported
SUPPORTS_PCIE=true

# Network Interface Naming
# CM5 can use different naming schemes:
#   - Device tree names: eth0, eth1, etc.
#   - Predictable names: end0, enx<mac>, enp1s0 (PCIe)
#
# Common patterns:
#   - Onboard GbE (if present): eth0 or end0
#   - PCIe Ethernet: enp1s0
#   - USB Ethernet: enx<mac> or eth1

INTERFACE_NAMING="device-tree"  # device-tree, predictable, custom

# Default interface assignments (highly dependent on carrier board)
DEFAULT_WAN_INTERFACE="eth0"
DEFAULT_LAN_INTERFACES="eth1"
DEFAULT_BRIDGE_NAME="FTS"

# WiFi (CM5 can have onboard WiFi)
WIFI_CHIPSET="broadcom"
WIFI_INTERFACE_PREFIX="wlan"  # wlan0

# LTE/WWAN Support (via PCIe or USB)
LTE_SLOT_TYPE="pcie"  # CM5 IO board has PCIe
LTE_RECOMMENDED_MODEMS="quectel-ec25,quectel-em05,sierra-em7455"
WWAN_INTERFACE_PREFIX="wwan"

# Power Management
SUPPORTS_SUSPEND=false  # Not recommended for router use
TDP_WATTS=12  # CM5 TDP under load

# QSecBit Tuning
QSECBIT_CPU_WEIGHT=0.15
QSECBIT_ENERGY_ENABLED=false  # ARM doesn't have RAPL
QSECBIT_XDP_MODE="generic"  # BCM2712 GbE doesn't support XDP native

# Container Resources
POD_MEMORY_LIMIT="12G"  # For 16GB CM5
POD_CPU_LIMIT="4"  # 4 Cortex-A76 cores
ENABLE_HUGEPAGES=false  # Not typically beneficial on ARM

# Fortress Features
ENABLE_HARDWARE_OFFLOAD=false  # Limited on RPi
ENABLE_CRYPTO_ACCEL=true  # BCM2712 has crypto extensions

# Storage Recommendations
RECOMMENDED_STORAGE_GB=64
STORAGE_TYPE="nvme"  # Via PCIe on IO board
TMPFS_SIZE="1G"

# CM5-Specific Settings
CM5_PCIE_GEN=2
CM5_PCIE_LANES=1
CM5_MAX_USB3_PORTS=2
